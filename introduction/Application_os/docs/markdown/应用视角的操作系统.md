# åº”ç”¨è§†è§’çš„æ“ä½œç³»ç»Ÿ

## æœ€å°çš„åº”ç”¨ç¨‹åº

### å¤ä¹ ç›¸å…³å·¥å…·

1. `objdump -d`åæ±‡ç¼–
2. `readelf -a`æŸ¥çœ‹æ‰€æœ‰çš„ELFä¿¡æ¯
3. `--verbose`æŸ¥çœ‹æ‰€æœ‰çš„ç¼–è¯‘é€‰é¡¹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨å“ªé‡Œæ‰¾å¤´æ–‡ä»¶ `gcc --verbose hello.c`
   ```c
   #include "..." search starts here:
   #include <...> search starts here:
    /usr/lib/gcc/x86_64-linux-gnu/11/include
    /usr/local/include
    /usr/include/x86_64-linux-gnu
    /usr/include
   End of search list.

   ```
4. `-WL,--verbose`æŸ¥çœ‹æ‰€æœ‰çš„é“¾æ¥é€‰é¡¹ï¼Œè§£é‡Šäº†endç¬¦å·çš„ç”±æ¥ `gcc -Wl,--verbose hello.c`
   ```6502&#x20;assembly
   OUTPUT_FORMAT("elf64-x86-64", "elf64-x86-64",
           "elf64-x86-64")
   OUTPUT_ARCH(i386:x86-64)
   ENTRY(_start)
   _end = .; PROVIDE (end = .);


   ```
5. `-static`ä¼šé™æ€é“¾æ¥libcåº“

### å°è¯•æ„å»ºæœ€å°çš„hello world

1. **å»æ‰#include**ï¼šåæ±‡ç¼–è¡Œæ•°ä¸ä¹‹å‰å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–

   é¢„å¤„ç†å™¨ä¼šå°†#includeæ‰€å¼•ç”¨çš„å†…å®¹æ‹·è´åˆ°æ‰€åœ¨ä½ç½®
2. **æ‰‹åŠ¨é“¾æ¥**ï¼šç¼–è¯‘å‡ºå¯é‡å®šå‘æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ldè¿›è¡Œ**é“¾æ¥ï¼ŒæŠ¥é”™å¦‚ä¸‹**ï¼š
   ```c
   ld: è­¦å‘Š: æ— æ³•æ‰¾åˆ°é¡¹ç›®ç¬¦å· _start; ç¼ºçœä¸º 0000000000401000
   ld: hello.o: in function `main':
   hello.c:(.text+0x13): undefined reference to `puts'

   ```
   å› ä¸ºï¼Œåœ¨objdumpåæ±‡ç¼–ä¸­ï¼Œå¯é‡å®šå‘æ–‡ä»¶çš„callå¹¶ä¸çŸ¥é“è¦è·³è½¬åˆ°å“ªé‡Œ

   ![](image/image_b5Vp6o_qKF.png)
3. **å»æ‰printfï¼Œå†è¿›è¡Œæ‰‹åŠ¨é“¾æ¥**ï¼šé“¾æ¥æˆåŠŸä½†æ˜¯æ‰§è¡Œå¤±è´¥

   ![](image/image_TIzl-WwRAs.png)

   å¯ä»¥å‘ç°æ˜¯retåœ¨è¿”å›æ—¶[^æ³¨é‡Š1]ï¼Œç›´æ¥è¿”å›åˆ°äº†0x1å¤„ï¼Œæ˜¯ç¨‹åºæ— æ³•è®¿é—®çš„å†…å­˜ã€‚ç„¶åå‘ç”Ÿäº†æ®µé”™è¯¯

   ![](image/image_lLivf3GuWx.png)
   1. `p`å‘½ä»¤ æŸ¥çœ‹å¯„å­˜å™¨ä¿¡æ¯
   2. `x/x `åœ°å€è®¿å­˜
4. **åŠ å…¥while(1)**ï¼šæ­£ç¡®æ‰§è¡Œï¼Œä½†æ˜¯ä¸èƒ½é€€å‡º

   **ç¨‹åºçš„é€€å‡ºæ˜¯éœ€è¦ä½¿ç”¨Sys\_exitç³»ç»Ÿè°ƒç”¨æ¥è¿›è¡Œ**

   **å¤„ç†å™¨è¿™ä¸ªçŠ¶æ€æœºåªä¼šæ— æƒ…çš„æŒ‰ç…§pcæ‰§è¡ŒæŒ‡ä»¤ï¼Œä½†æ˜¯æŒ‡ä»¤é›†ä¸­æ²¡æœ‰è§„å®šé€€å‡ºç¨‹åº/å…³é—­è®¡ç®—æœºçš„æŒ‡ä»¤ï¼Œå› æ­¤ç¨‹åºä¸­ä¹Ÿæ²¡æœ‰ä¸€æ¡é€€å‡ºç¨‹åºçš„æŒ‡ä»¤ã€‚é€€å‡ºã€æ‰“å°ç­‰ç›¸åº”å·¥ä½œçš„è¿›è¡Œéƒ½æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼Œå‘é€ç»™æ“ä½œç³»ç»Ÿæ¥è¿›è¡Œ**â†’**æ“ä½œç³»ç»Ÿå¯ä»¥ä»»æ„æ”¹å˜ç¨‹åºçŠ¶æ€**
   > **å…³é—­è®¡ç®—æœºæ˜¯æ€ä¹ˆè¿›è¡Œçš„ï¼Ÿ**
   >
   > ![](image/image_Fl_Xbyf_X1.png)
5. ä½¿ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™æœ€å°çš„hello worldç¨‹åº

   Cè¯­è¨€å°±å¯ä»¥é€šè¿‡`sys/syscall.h`ä¸­çš„`syscall(long number,...)`å‡½æ•°è°ƒç”¨ç³»ç»Ÿè°ƒç”¨
   ```c
   #include <sys/syscall.h>

   // The x86-64 system call Application Binary Interface (ABI):
   //     System call number: RAX
   //     Arguments: RDI, RSI, RDX, RCX, R8, R9
   //     Return value: RAX
   // See also: syscall(2) syscalls(2)

   #define syscall3(id, a1, a2, a3) \
       movq $SYS_##id, %rax; \
       movq $a1, %rdi; \
       movq $a2, %rsi; \
       movq $a3, %rdx; \
       syscall

   #define syscall2(id, a1, a2)  syscall3(id, a1, a2, 0)
   #define syscall1(id, a1)  syscall2(id, a1, 0)

   .globl _start
   _start:
       syscall3(write, 1, addr1, addr2 - addr1) //è°ƒç”¨sys_writeç³»ç»Ÿè°ƒç”¨ã€€å†™addr1èµ·å§‹çš„(addr2-addr1)å¤§å°çš„æ•°æ®
       syscall1(exit, 1) //è°ƒç”¨sys_exité€€å‡ºç¨‹åº

   addr1:
       .ascii "\033[01;31mHello, OS World\033[0m\n" //é‡ç½®ï¼ˆæ¶ˆé™¤ï¼‰æ‰€æœ‰é¢œè‰²å’Œå›¾å½¢ï¼Œç„¶ååŠ ç²—è®¾ç½®çº¢è‰²
   addr2:

   ```

### ä½¿ç”¨straceè¿½è¸ªç³»ç»Ÿè°ƒç”¨

1. æ“ä½œç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºå±‚æ¬¡

   Coreutilsï¼ˆUbuntuä½¿ç”¨çš„æ˜¯GNU Coreutilsï¼‰â†’ç³»ç»Ÿå‘½ä»¤sshã€vimã€ffmpegç­‰â†’VScodeã€å‰ªè¾‘è½¯ä»¶
   - BusyBoxï¼ˆPAä¸­ä½¿ç”¨çš„ï¼‰
   - Toybox
     ```bash
     wget -r -np -nH --cut-dirs=2 -R "index.html*" "https://jyywiki.cn/os-demos/introduction/tar/" --no-check-certificate

     ```
     ä¹‹åè§£å‹`toybox-0.1.0-tar.bz2`ï¼Œè¿›å…¥toybox-0.1.0å†…makeå³å¯

     makeæ—¶ä¼šæŠ¥é”™`toys/mdev.c`å†…â€œundefined reference to \`makedevâ€™â€ï¼Œåœ¨`toys/mdev.c`å†…æ·»åŠ å¤´æ–‡ä»¶`#include <sys/sysmacros.h>`é‡æ–°ç¼–è¯‘å³å¯
2. è¿™äº›ç¨‹åºéƒ½æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå’Œminimal.Sçš„å¯æ‰§è¡Œæ–‡ä»¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«

   å¯ä»¥åœ¨VSCodeä¸­å®‰è£…`Hex Editor`æ’ä»¶æ¥æŸ¥çœ‹å¹¶æ›´æ”¹äºŒè¿›åˆ¶æ–‡ä»¶
3. ä½¿ç”¨straceè¿½è¸ªåº”ç”¨ç¨‹åºçš„ç³»ç»Ÿè°ƒç”¨

   `strace -f è¿›ç¨‹`è¿½è¸ªè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹

   å¯ä»¥ç®¡é“ç»™vimæŸ¥çœ‹`|&`[^æ³¨é‡Š2]` vim-`ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­ä½¿ç”¨`%!grep -v -e -1`[^æ³¨é‡Š3]å»æ‰éæ³•çš„ç³»ç»Ÿè°ƒç”¨
   ```bash
   wget -r -np -nH --cut-dirs=2 -R "index.html*" "https://jyywiki.cn/os-demos/introduction/strace/" --no-check-certificate
   ```
   é€šè¿‡`make gcc-demo |& vim-`å¯ä»¥çœ‹åˆ°gccä½¿ç”¨SYS\_execveç³»ç»Ÿè°ƒç”¨ï¼Œè°ƒç”¨äº†å¤–éƒ¨çš„aså’Œldæ¥è¿›è¡Œæ±‡ç¼–å’Œé“¾æ¥

   ![](image/image_Y3UU6ke55i.png)

   ![](image/image_xJmjCIhf3_.png)

   é€šè¿‡make xedit-demoçŸ¥é“äº†ç»˜åˆ¶ä¹Ÿæ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨è¿›è¡Œçš„ï¼Œwriteæ˜¾ç¤ºç¼“å†²åŒº readé”®ç›˜readå…‰æ ‡

## ç†è§£é«˜çº§è¯­è¨€ç¨‹åº

### Simple Cè§£é‡Šå™¨

Simple Cçš„æ¯ä¸€æ¡è¯­å¥éƒ½è‡³å¤šåšä¸€æ¬¡è¿ç®—ï¼Œä¸”æ¡ä»¶è¯­å¥ä¸­ä¸åŒ…å«è¿ç®—

å¯ä»¥æ„å»ºçŠ¶æ€æœºä¸ºï¼š

![](image/image_U-NeTgttKH.png)

- çŠ¶æ€æ˜¯æ ˆå¸§çš„é›†åˆ+å…¨å±€å˜é‡ï¼Œæ¯ä¸€ä¸ªæ ˆå¸§ä¸­å­˜å‚¨ç€è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå‚æ•°**ä»¥åŠæ‰§è¡Œåˆ°çš„PCå€¼**

  æœ‰äº†PCï¼Œè¿™æ ·ä»å‡½æ•°è¿”å›æ—¶ï¼Œæ‰çŸ¥é“ä»å“ªç»§ç»­æ‰§è¡Œ
- åˆå§‹çŠ¶æ€ï¼šæ ˆå¸§é›†åˆä¸­åªæœ‰ä¸€ä¸ªæ ˆå¸§ï¼Œå³ä¸ºmainçš„æ ˆå¸§ï¼ŒPCä¸º0ï¼›å…¨å±€å˜é‡ä¸ºåˆå§‹å€¼
- çŠ¶æ€è¿ç§»ï¼šæ‰§è¡Œæ ˆé¡¶æ ˆå¸§çš„PCå¤„è¯­å¥

ä¸‹é¢ä»¥æ±‰è¯ºå¡”ä¸ºä¾‹ï¼Œæ„å»ºSimple CçŠ¶æ€æœºï¼š

- ä¸ä½¿ç”¨çŠ¶æ€æœºçš„æ±‰è¯ºå¡”å®ç°

  å°†nä¸ªç›˜å­ä»Aç»Bç§»åˆ°Cï¼Œå¯ä»¥å…ˆå°†n-1ä¸ªç›˜å­ç§»åˆ°Bï¼Œå†æŠŠæœ€åçš„ä¸€ä¸ªç›˜å­ç§»åˆ°Cï¼Œä¹‹åå†å°†n-1ä¸ªBä¸Šçš„ç›˜å­ç»Aç§»åˆ°C
  ```c
  #include <stdio.h>

  int hanoi(int n, char from, char to, char via) {
      if (n == 1) {
          printf("%c -> %c\n", from, to);//åªæœ‰ä¸€ä¸ªç›˜å­ï¼ŒæŠŠå®ƒä»fromç§»åˆ°to
          return 1;
      } else {
          int c1 = hanoi(n - 1, from, via, to);//å…ˆæŠŠn-1ä¸ªç›˜å­ç§»åˆ°ä¸­é—´
          hanoi(1, from, to, via);//ç„¶åæŠŠï¼‘ä¸ªç›˜å­ç§»åˆ°to
          int c2 = hanoi(n - 1, via, to, from);//æœ€åå†æŠŠn-1ä¸ªåœ¨ä¸­é—´çš„ç›˜å­ç§»åˆ°to
          return c1 + c2 + 1;
      }
  }

  ```
- ä½¿ç”¨çŠ¶æ€æœºçš„æ±‰è¯ºå¡”å®ç°
  - å®šä¹‰æ ˆå¸§ç»“æ„ä½“
    ```c
    struct Frame {
        // Each frame has a program counter to keep track its next
        // to-be-executed statement.
        int pc;

        // The internal state of the frame. This state includes
        // both arguments and local variables (if any).
        //
        // Arguments:
        // æŒ‰ç…§é€’å½’å®ç°çš„æ±‰è¯ºå¡”ï¼Œå‡½æ•°çš„å‚æ•°æœ‰n from to via
        // å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å±€éƒ¨å˜é‡åŒ…æ‹¬c1,c2
        int n;
        char from, to, via;

        // Local variables:
        int c1, c2;
    };

    ```
  - å®šä¹‰æ ˆå¸§é›†åˆä»¥åŠæ ˆé¡¶æŒ‡é’ˆ
    ```c
    Frame stk[64]; //æ ˆå¸§é›†åˆ
    Frame *top = stk - 1; //topæŒ‡å‘æ ˆé¡¶ï¼Œæ²¡æœ‰å…ƒç´ æ—¶å®šä¹‰ä¸ºæ ˆèµ·å§‹-æ ˆå¸§å¤§å°
    ```
  - å®šä¹‰å®ï¼Œå®ç°å‡½æ•°è°ƒç”¨å’Œå‡½æ•°è¿”å›
    ```c
        // Function call: push a new frame (PC=0) onto the stack
        // è°ƒç”¨å‡½æ•°ï¼Œç›¸å½“äºæ–°å…¥æ ˆä¸€ä¸ªæ ˆå¸§ï¼Œå› ä¸ºæ ˆèµ·å§‹å®šä¹‰ä¸ºstk-1
        // æ‰€ä»¥è¿™é‡Œéœ€è¦å…ˆé€’å¢æ ˆé¡¶æŒ‡é’ˆï¼Œå†å…¥æ ˆframe
        #define call(...) ({ *(++top) = (Frame){.pc = 0, __VA_ARGS__}; })
        
        // Function return: pop the top-most frame
        // ä»å‡½æ•°ä¸­è¿”å›ç›¸å½“äºå‡ºæ ˆã€€valä¸­æ˜¯è¿”å›å€¼
        #define ret(val) ({ top--; retval = (val); })

    ```
  - å®šä¹‰å‡½æ•°è¿”å›å€¼ä»¥åŠåˆå§‹åŒ–æ ˆ
    ```c
        // The last function-return's value. It is not obvious
        // that we only need one retval.
        int retval = 0;

        // The initial call to the recursive function
        call(n, from, to, via);

    ```
  - çŠ¶æ€æ›´è¿­

    **æ¯æ¬¡å–æ ˆé¡¶çš„æ ˆå¸§PC**æ‰§è¡Œï¼Œæ ¹æ®PCæ‰€åœ¨çš„ä½ç½®ï¼Œå†³å®šå®ƒæ˜¯è¦callè¿˜æ˜¯èµ‹å€¼ä¸­é—´å˜é‡è¿˜æ˜¯è¿”å›ã€‚æ‰§è¡Œå®Œåï¼Œé€’å¢PC
    ```c
       while (1) {
            // Fetch the top-most frame.
            // è·å–æ ˆé¡¶æŒ‡é’ˆ
            Frame *f = top;
            if (f < stk) { //æ ˆç©º
                // No top-most frame any more; we're done.
                break;
            }

            // Jumps may change this default next pc.
            int next_pc = f->pc + 1;

            // Single step execution.

            // Extract the parameters from the current frame. (It's
            // generally a bad idea to reuse variable names in
            // practice; but we did it here for readability.)
            // ä»æ ˆå¸§ä¸­è·å¾—å‚æ•°
            int n = f->n, from = f->from, to = f->to, via = f->via;

            // åŸºæœ¬ä¸Šæ˜¯æŒ‰ç…§é€’å½’çš„æ±‰è¯ºå¡”å‡½æ•°å†…éƒ¨å®ç°
            switch (f->pc) {
                case 0:
                    if (n == 1) {
                        printf("%c -> %c\n", from, to);
                        ret(1);
                   ã€€ }
                    break;
                case 1: call(n - 1, from, via, to); break;
                case 2: f->c1 = retval; break;
                case 3: call(1, from, to, via); break;
                case 4: call(n - 1, via, to, from); break;
                case 5: f->c2 = retval; break;
                case 6: ret(f->c1 + f->c2 + 1); break;
                default: assert(0);
            }

            f->pc = next_pc; //å†™PC
        }

    ```
  - æœ€åè¿”å›æœ€ç»ˆçš„è¿”å›å€¼

    `return retval`

> ğŸ–ï¸**C/C++ä¸­çš„å‡½æ•°å’Œæ•°å­¦ä¸­çš„å‡½æ•°çš„åŒºåˆ«**
>
> ä¾‹å¦‚ï¼Œå¯ä»¥æŠŠFibonacci æ•°åˆ—çš„é€’å½’å…¬å¼å†™æˆä¸‹å¼ï¼Œä½†æ˜¯æ±‰è¯ºå¡”ä¸è¡Œ
>
> ```c++
> // ä¹Ÿå¯ä»¥ return f(n - 2) + f(n - 1)
> ;return f(n - 1) + f(n - 2);
> ```
>
> ä¸è¡Œçš„æ ¹æœ¬åŸå› åœ¨äº**æ±‰è¯ºå¡”ä¸­çš„ printf ä¼šå¸¦æ¥å…¨å±€çš„å‰¯ä½œç”¨ï¼Œéœ€è¦æŒ‰ç…§é¡ºåºè¾“å‡ºã€‚** C/C++ éµå¾ª â€œé¡ºåºæ‰§è¡Œâ€ çš„åŸåˆ™ï¼Œå‡½æ•°çš„æ‰§è¡Œæœ‰ â€œå…ˆåâ€ ï¼ˆä¸åƒæ•°å­¦çš„å‡½æ•°ï¼Œå…ˆåæ˜¯æ— å…³çš„ï¼‰ï¼Œ**æŒ‰ç…§ä¸åŒé¡ºåºè°ƒç”¨ä¼šå¯¼è‡´ç¨‹åºè¾“å‡ºä¸åŒçš„ç»“æœ**ã€‚è€Œåœ¨å…·ä½“å®ç°æ—¶ï¼Œæ¯ä¸ªæ ˆå¸§ä¸­å­˜æ”¾çš„ â€œå½“å‰æ‰§è¡Œçš„ä½ç½®â€ ï¼ˆPCï¼‰ å®ç°äº†é¡ºåºæ‰§è¡Œ

## ç¼–è¯‘å™¨ä¸ç¼–è¯‘ä¼˜åŒ–

### ç¼–è¯‘å™¨

**ç¼–è¯‘çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯æŠŠâ€œCè¯­è¨€çš„çŠ¶æ€æœºâ€ç¿»è¯‘æˆâ€œæ±‡ç¼–è¯­è¨€çš„çŠ¶æ€æœºâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼–è¯‘å™¨å®é™…ä¸Šæ˜¯çŠ¶æ€æœºä¹‹å‰çš„ç¿»è¯‘å™¨**

ä»¥Simple Cæ¥è¯´ï¼Œå®ƒçš„ç¼–è¯‘æ¶‰åŠåˆ°ä¸€ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š

- è¿ç®—ï¼šæ“ä½œæ•°loadåˆ°å¯„å­˜å™¨ã€ç„¶åä½¿ç”¨å¯¹åº”çš„æ“ä½œç¬¦è¿›è¡Œè¿ç®—ï¼Œæœ€åStoreåˆ°å†…å­˜ä¸­
- åˆ†æ”¯ï¼šæ¡ä»¶è½¬ç§»æŒ‡ä»¤
- å‡½æ•°è°ƒç”¨ï¼šä½¿ç”¨`æ ˆå¸§å¯„å­˜å™¨stackpoint`ï¼Œè¯»å–å†…å­˜ä¸­çš„æ ˆå¸§

[My\_C\_Compiler](https://www.wolai.com/xbWCaKVEWLVfjRhmBusrNM "My_C_Compiler")

> ç”±äºSimple Cè¿™ç§ç›´æ¥ç¿»è¯‘çš„æ€§è´¨ï¼Œå°†Cè¯­è¨€åˆç§°ä¹‹ä¸ºâ€œé«˜çº§æ±‡ç¼–è¯­è¨€â€â€”â€”å­˜åœ¨Cä»£ç åˆ°æŒ‡ä»¤é›†çš„ç›´æ¥å¯¹åº”å…³ç³»ï¼ŒçŠ¶æ€æœºå’Œè¿ç§»éƒ½å¯ä»¥â€œç›´è¯‘â€

### ç¼–è¯‘ä¼˜åŒ–

C è¯­è¨€ç¼–è¯‘å™¨åœ¨è¿›è¡Œä»£ç ä¼˜åŒ–æ—¶ï¼Œ**éµå¾ªçš„åŸºæœ¬å‡†åˆ™æ˜¯åœ¨ä¸æ”¹å˜ç¨‹åºçš„è¯­ä¹‰ï¼ˆå³ç¨‹åºçš„è¡Œä¸ºå’Œè¾“å‡ºç»“æœï¼‰çš„å‰æä¸‹ï¼Œæé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡å’Œ/æˆ–å‡å°‘ç¨‹åºçš„èµ„æºæ¶ˆè€—**[^æ³¨é‡Š4]ã€‚å…¶ä¸­ï¼Œæœ€é‡è¦çš„â€œä¸‰æ¿æ–§â€æ˜¯ï¼š

- **å‡½æ•°å†…è”ï¼šå°†å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºå‡½æ•°ä½“æœ¬èº«çš„å†…å®¹**
- **å¸¸é‡ä¼ æ’­ï¼šåœ¨ç¼–è¯‘æ—¶è®¡ç®—å¸¸é‡è¡¨è¾¾å¼çš„å€¼å¹¶æ›¿æ¢**
- **æ­»ä»£ç æ¶ˆé™¤ï¼šåˆ é™¤æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œåˆ°çš„ä»£ç **

è€Œç¼–è¯‘å™¨ä¸€èˆ¬ä¸ä¼˜åŒ–çš„éƒ¨åˆ†åŒ…æ‹¬ï¼š

- **æœ¬æ‰§è¡Œæ–‡ä»¶å†…çš„ç³»ç»Ÿè°ƒç”¨**
- **å¤–éƒ¨å‡½æ•°è°ƒç”¨ï¼ˆæœªçŸ¥ä»£ç ï¼Œå¯èƒ½å†…éƒ¨å­˜åœ¨ç³»ç»Ÿè°ƒç”¨ï¼‰**
- **ç¼–è¯‘å™¨æä¾›çš„ä¸å¯ä¼˜åŒ–æ ‡æ³¨ï¼švolatileã€æœ‰å‡½æ•°é—´éš”çš„loadã€storeä»¥åŠinline assembly**

> **ä½†æ˜¯è¿™æ ·çš„ç¼–è¯‘å™¨ä¼˜åŒ–åŸåˆ™æ˜¯æœ‰ç‚¹ä¿å®ˆçš„**
>
> ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ï¼Œç¼–è¯‘å™¨ä¸å¥½å°†å…¶åˆå¹¶ä¸ºä¸€ä¸ªprintfï¼Œé€šè¿‡writeç³»ç»Ÿè°ƒç”¨å†™å…¨éƒ¨å­—ç¬¦
>
> ```c
> if (n <= 26) {
>     for (int i = 0; i < n; i++) {
>         putchar('A' + i);
>     }
> }
> ```
>
> **å› æ­¤ï¼Œåœ¨ç°åœ¨çš„æ“ä½œç³»ç»Ÿä¸­å­˜åœ¨ç€ä¸€ç§æ–°çš„æ–¹å‘ï¼šå°†çŠ¶æ€æœºçš„ä¸€éƒ¨åˆ†ç›´æ¥æ”¾åœ¨æ“ä½œç³»ç»Ÿä¸­è¿è¡Œ**
>
> 1. æŠŠä»£ç æ”¾è¿›æ“ä½œç³»ç»Ÿä¸­æ‰§è¡Œï¼šXRP
> 2. å•ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼šUnikernel



[^æ³¨é‡Š1]: ä»æ ˆé¡¶å–å‡º64ä½çš„PCï¼špc<-M\[rsp]
    ç„¶åæ ˆé¡¶+8ï¼Œå‡ºæ ˆrsp+=8

[^æ³¨é‡Š2]: 2 >&1 |

[^æ³¨é‡Š3]: -eæŒ‡å®šå¤šä¸ªæœç´¢åŒ¹é…æ¨¡å¼
    -e "hello" -e "yes"

[^æ³¨é‡Š4]: ä»¥çŠ¶æ€æœºçš„è§†è§’æ¥çœ‹ï¼šåªè¦ç³»ç»Ÿè°ƒç”¨åºåˆ—ä¸å˜ï¼Œå…¶ä»–çš„ä¼˜åŒ–éƒ½æ˜¯å…è®¸çš„
